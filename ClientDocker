# Šitą Dockerfile naudoju sukurti "kliento" konteineriui.
# Mano konteineris turi atlikti tik vieną funkciją:  galėti pasiekti webserver'į ir tikrinti ar jis veikia.

FROM debian:12-slim # Pasirenku labai lengvą Debian versiją, kad konteineris būtų mažas ir greitas.


# Čia atnaujinu paketų sąrašą ir įdiegiau įrankius,
# kurių man reikia testavimui:
# - w3m: tai tekstinė naršyklė, su kuria galiu atsidaryti webserverio puslapį iš konteinerio.
# - curl: leidžia patikrinti HTTP atsakymus.
# - iputils-ping: leidžia ping’inti webserverio IP ir tikrinti ryšį.
RUN apt-get update && apt-get install -y --no-install-recommends \
      w3m \
      curl \
      iputils-ping \
      ca-certificates \
    && rm -rf /var/lib/apt/lists/*   # Po instaliacijos išvalau apt cache, kad image būtų mažesnis.
 
# Nustatau darbinį katalogą konteinerio viduje.
# Čia aš būsiu „įmestas“ kai prisijungsiu prie konteinerio su docker exec.
WORKDIR /client

# Paleidimo komanda: konteineris startuoja su /bin/bash.
# Tai leidžia man rankiniu būdu testuoti:
#   w3m http://<webserver-ip>
#   curl http://<webserver-ip>
#   ping <webserver-ip>
CMD ["/bin/bash"]
